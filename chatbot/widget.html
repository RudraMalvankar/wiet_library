<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Library Chatbot Widget - Demo</title>
    <script type="module">
        import { showMyLoans, showVisitCount, searchBooks, appendMessage } from './widget.js';

        window.addEventListener('DOMContentLoaded', () => {
            const loans = document.getElementById('my-loans');
            const visits = document.getElementById('my-visits');
            const searchResult = document.getElementById('search-result');
            const chat = document.getElementById('chat');
            
            showMyLoans(loans);
            showVisitCount(visits);

            document.getElementById('search-btn').addEventListener('click', async () => {
                const q = document.getElementById('search-q').value.trim();
                appendMessage(chat, 'You', q);
                await searchBooks(q, searchResult);
                appendMessage(chat, 'Bot', 'Here are the search results');
            });
        });
    </script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #chat { border: 1px solid #ddd; padding: 10px; height: 200px; overflow:auto; }
    </style>
</head>
<body>
    <h2>Library Chatbot (Demo)</h2>
    <div id="chat"></div>
    <h3>My Loans</h3>
    <div id="my-loans">Loading…</div>
    <h3>Visits</h3>
    <div id="my-visits">Loading…</div>
    <h3>Search Books</h3>
    <input id="search-q" placeholder="Title or author" /> <button id="search-btn">Search</button>
    <div id="search-result"></div>
</body>
</html>